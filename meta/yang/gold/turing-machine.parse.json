{
"module":{
  "ident":"turing-machine",
  "description":"Data model for the Turing Machine.",
  "namespace":"http://example.net/turing-machine",
  "prefix":"tm",
  "revision":{
    "rev-date":"2013-12-27",
    "description":"Initial revision."},
  "groupings":[
    {
      "ident":"tape-cells",
      "description":"The tape of the Turing Machine is represented as a sparse\n       array.",
      "definitions":[
        {
          "ident":"cell",
          "list":{
            "key":["coord"],
            "ident":"cell",
            "description":"List of non-blank cells.",
            "definitions":[
              {
                "ident":"coord",
                "leaf":{
                  "ident":"coord",
                  "description":"Coordinate (index) of the tape cell.",
                  "type":{
                    "ident":"cell-index"}}},
              {
                "ident":"symbol",
                "leaf":{
                  "ident":"symbol",
                  "description":"Symbol appearing in the tape cell.\n\n           Blank (empty string) is not allowed here because the\n           'cell' list only contains non-blank cells.",
                  "type":{
                    "ident":"tape-symbol",
                    "maxLength":1}}}]}}]}],
  "typedefs":[
    {
      "ident":"tape-symbol",
      "description":"Type of symbols appearing in tape cells.\n\n       A blank is represented as an empty string where necessary.",
      "type":{
        "ident":"string",
        "minLength":0,
        "maxLength":1}},
    {
      "ident":"cell-index",
      "description":"Type for indexing tape cells.",
      "type":{
        "ident":"int64"}},
    {
      "ident":"state-index",
      "description":"Type for indexing states of the control unit.",
      "type":{
        "ident":"uint16"}},
    {
      "ident":"head-dir",
      "description":"Possible directions for moving the read/write head, one cell\n       to the left or right (default).",
      "type":{
        "ident":"enumeration",
        "enumeration":[],
        "default":"right"}}],
  "definitions":[
    {
      "ident":"turing-machine",
      "container":{
        "ident":"turing-machine",
        "description":"State data and configuration of a Turing Machine.",
        "definitions":[
          {
            "ident":"state",
            "leaf":{
              "ident":"state",
              "description":"Current state of the control unit.\n\n         The initial state is 0.",
              "config":false,
              "mandatory":true,
              "type":{
                "ident":"state-index"}}},
          {
            "ident":"head-position",
            "leaf":{
              "ident":"head-position",
              "description":"Position of tape read/write head.",
              "config":false,
              "mandatory":true,
              "type":{
                "ident":"cell-index"}}},
          {
            "ident":"tape",
            "container":{
              "ident":"tape",
              "description":"The contents of the tape.",
              "config":false,
              "definitions":[
                {
                  "ident":"tape-cells",
                  "uses":{
                    "ident":"tape-cells"}},
                {
                  "ident":"rewind",
                  "action":{
                    "ident":"rewind",
                    "description":"be kind",
                    "ident":"rewind",
                    "description":"be kind",
                    "input":{
                      "definitions":[
                        {
                          "ident":"position",
                          "leaf":{
                            "ident":"position",
                            "type":{
                              "ident":"int32"}}}]},
                    "output":{
                      "definitions":[
                        {
                          "ident":"estimatedTime",
                          "leaf":{
                            "ident":"estimatedTime",
                            "type":{
                              "ident":"int32"}}}]}}}]}},
          {
            "ident":"transition-function",
            "container":{
              "ident":"transition-function",
              "description":"The Turing Machine is configured by specifying the\n         transition function.",
              "definitions":[
                {
                  "ident":"delta",
                  "list":{
                    "key":["label"],
                    "ident":"delta",
                    "description":"The list of transition rules.",
                    "definitions":[
                      {
                        "ident":"label",
                        "leaf":{
                          "ident":"label",
                          "description":"An arbitrary label of the transition rule.",
                          "type":{
                            "ident":"string"}}},
                      {
                        "ident":"input",
                        "container":{
                          "ident":"input",
                          "description":"Output values of the transition rule.",
                          "definitions":[
                            {
                              "ident":"state",
                              "leaf":{
                                "ident":"state",
                                "description":"New state of the control unit. If this leaf is not\n               present, the state doesn't change.",
                                "type":{
                                  "ident":"state-index"}}},
                            {
                              "ident":"symbol",
                              "leaf":{
                                "ident":"symbol",
                                "description":"Symbol to be written to the tape cell. If this leaf is\n               not present, the symbol doesn't change.",
                                "type":{
                                  "ident":"tape-symbol"}}},
                            {
                              "ident":"head-move",
                              "leaf":{
                                "ident":"head-move",
                                "description":"Move the head one cell to the left or right",
                                "type":{
                                  "ident":"head-dir"}}}]}}]}}]}}]}},
    {
      "ident":"initialize",
      "action":{
        "ident":"initialize",
        "description":"Initialize the Turing Machine as follows:\n\n       1. Put the control unit into the initial state (0).\n\n       2. Move the read/write head to the tape cell with coordinate\n          zero.\n\n       3. Write the string from the 'tape-content' input parameter to\n          the tape, character by character, starting at cell 0. The\n          tape is othewise empty.",
        "ident":"initialize",
        "description":"Initialize the Turing Machine as follows:\n\n       1. Put the control unit into the initial state (0).\n\n       2. Move the read/write head to the tape cell with coordinate\n          zero.\n\n       3. Write the string from the 'tape-content' input parameter to\n          the tape, character by character, starting at cell 0. The\n          tape is othewise empty.",
        "input":{
          "definitions":[
            {
              "ident":"tape-content",
              "leaf":{
                "ident":"tape-content",
                "description":"The string with which the tape shall be initialized. The\n           leftmost symbol will be at tape coordinate 0.",
                "type":{
                  "ident":"string",
                  "default":""}}}]}}},
    {
      "ident":"run",
      "action":{
        "ident":"run",
        "description":"Start the Turing Machine operation.",
        "ident":"run",
        "description":"Start the Turing Machine operation."}},
    {
      "ident":"halted",
      "notification":{
        "ident":"halted",
        "description":"The Turing Machine has halted. This means that there is no\n       transition rule for the current state and tape symbol.",
        "definitions":[
          {
            "ident":"state",
            "leaf":{
              "ident":"state",
              "mandatory":true,
              "type":{
                "ident":"state-index"}}}]}}]}}